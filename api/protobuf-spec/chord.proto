syntax = "proto3";

import "google/protobuf/empty.proto";
import "google/protobuf/wrappers.proto";

package grpc;


service Chord {
  rpc GetSuccessor(google.protobuf.Empty) returns (Node) {}
  rpc ClosestPrecedingNode(Lookup) returns (Node) {}
  rpc FindSuccessor(Lookup) returns (Node) {}
  rpc GetPredecessor(google.protobuf.Empty) returns (Node) {}
  rpc Notify(Node) returns (google.protobuf.BoolValue) {}
  rpc GetFingerTable(google.protobuf.Empty) returns (Nodes) {}
  rpc GetSuccessorList(google.protobuf.Empty) returns (Nodes) {}
}

message Lookup {
  bytes Key = 1;
}

message Node {
  string IP = 1;
  int32 Port = 2;
  bytes Key = 3;
}

message Nodes {
  repeated Node Nodes = 1;
}